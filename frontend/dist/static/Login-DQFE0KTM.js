import{u as E,b as P,r as d,A as T,d as G,j as s,e as N,g as k}from"./index-BkQICH-X.js";import{u as F}from"./UseDocumentTitle-McNeP1rR.js";import{N as I}from"./Notifications-KuRf63x_.js";import{T as U,a as O,b as C,c as V,A as B}from"./tabs-Bkzm6Ojr.js";import{B as p}from"./button-DZFmWa-B.js";import{C as H,b as J,c as R,d as q,a as g,e as v}from"./card-DD6vI8e8.js";import{I as y}from"./input-DfNpMjP5.js";import{L as c,a as L}from"./label-HHLXxaTW.js";import"./iconBase-r11lJbk7.js";import"./extends-CCbyfPlC.js";import"./index-CTZesL8v.js";import"./index-BDpOC3Tw.js";import"./index-DadDiSAp.js";import"./index-Bo7cNx1T.js";import"./index-BBjFYfzN.js";import"./index-Nm5ibAgm.js";import"./createLucideIcon-CFD14ua0.js";const is=()=>{F("Login");const t=E(),b=P(),{userAuthData:u,setUserAuth:f}=d.useContext(T);d.useEffect(()=>{var n;if(u&&u.length>0||u&&u.isConnected){t("/");return}return((n=b.state)==null?void 0:n.info)&&o({...r,open:!0,message:info}),()=>{}},[]);const[h,a]=d.useState(!1),[r,o]=d.useState({open:!1,message:""}),A=e=>{e.preventDefault();const n=e.target.email.value,j=e.target.password.value;(async()=>{a(!0);const i={email:n,password:j},[m,l]=await N(i);if(!m){a(!1),o({...r,open:!0,message:l.Error});return}l.user.isConnected=!0,f(l.user),a(!1),t("/")})()},S=G({onError:e=>{o({...r,open:!0,message:e.message+", please try again."}),a(!1)},onNonOAuthError:e=>{o({...r,open:!0,message:e.message+", please try again."}),a(!1)},onSuccess:e=>{a(!0);const n=e.code;(async()=>{const[w,i]=await k(n);if(!w){a(!1),t("/");return}if(i.accountExistsAlready){const m=i.user,l={email:m.email,password:m.password},[D,x]=await N(l);if(!D){a(!1),o({...r,open:!0,message:x.Error});return}x.user.isConnected=!0,f(x.user),a(!1),t("/");return}t("/signup/get-started",{state:{informationGiven:i}})})()},flow:"auth-code"});return s.jsxs("div",{className:"flex items-center justify-center min-h-5",children:[r.open&&s.jsx(I,{alertState:r,setAlertState:o}),s.jsx("div",{className:"max-w-screen-sm mx-auto mb-10",children:s.jsxs(U,{defaultValue:"sign-in",className:"w-[400px] max-sm:w-[350px]",children:[s.jsxs(O,{className:"grid w-full grid-cols-2",children:[s.jsx(C,{value:"sign-in",children:"Login"}),s.jsx(C,{value:"sign-up",onClick:e=>{e.stopPropagation(),t("/signup")},children:"Sign Up"})]}),s.jsx(V,{value:"sign-in",children:s.jsxs(H,{children:[s.jsxs(J,{children:[s.jsx(R,{children:"Login"}),s.jsx(q,{children:"Login to your account using your email and password."})]}),s.jsxs("form",{onSubmit:A,children:[s.jsxs(g,{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(c,{htmlFor:"email",children:"Email"}),s.jsx(y,{id:"email",type:"email",defaultValue:""})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(c,{htmlFor:"password",children:"Password"}),s.jsx(y,{id:"password",type:"password",defaultValue:""})]})]}),s.jsx(v,{children:h?s.jsxs(p,{disabled:!0,className:"w-full",children:[s.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):s.jsx(p,{type:"submit",className:"w-full",children:"Login with Email"})})]}),s.jsx(g,{className:"space-y-2 text-center",children:s.jsx(c,{className:"text-center mb-6",children:"or"})}),s.jsx(v,{children:h?s.jsxs(p,{disabled:!0,className:"w-full",children:[s.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):s.jsxs(p,{className:"w-full",onClick:()=>{a(!0),S()},children:[s.jsx(B,{className:"mr-2"}),"Login with Google"]})}),s.jsx(g,{className:"space-y-2 text-center",children:s.jsxs(c,{onClick:e=>{e.preventDefault(),t("/signup")},className:"text-center mb-6",children:["Don't have an account, ",s.jsx(c,{className:"underline text-cyan-600 hover:text-sky-400 cursor-pointer",children:"Join"})]})})]})})]})})]})};export{is as default};
