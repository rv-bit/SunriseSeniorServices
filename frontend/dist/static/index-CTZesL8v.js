import{r as o,a as x}from"./index-BkQICH-X.js";import{_ as A}from"./extends-CCbyfPlC.js";import{b as E,$ as P}from"./index-BDpOC3Tw.js";function R(e,n,{checkForDefaultPrevented:t=!0}={}){return function(c){if(e==null||e(c),t===!1||!c.defaultPrevented)return n==null?void 0:n(c)}}function U(e,n){const t=o.createContext(n);function r(a){const{children:s,...u}=a,f=o.useMemo(()=>u,Object.values(u));return o.createElement(t.Provider,{value:f},s)}function c(a){const s=o.useContext(t);if(s)return s;if(n!==void 0)return n;throw new Error(`\`${a}\` must be used within \`${e}\``)}return r.displayName=e+"Provider",[r,c]}function w(e,n=[]){let t=[];function r(a,s){const u=o.createContext(s),f=t.length;t=[...t,s];function i(d){const{scope:l,children:$,...p}=d,b=(l==null?void 0:l[e][f])||u,h=o.useMemo(()=>p,Object.values(p));return o.createElement(b.Provider,{value:h},$)}function m(d,l){const $=(l==null?void 0:l[e][f])||u,p=o.useContext($);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${a}\``)}return i.displayName=a+"Provider",[i,m]}const c=()=>{const a=t.map(s=>o.createContext(s));return function(u){const f=(u==null?void 0:u[e])||a;return o.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return c.scopeName=e,[r,S(c,...n)]}function S(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const r=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(a){const s=r.reduce((u,{useScope:f,scopeName:i})=>{const d=f(a)[`__scope${i}`];return{...u,...d}},{});return o.useMemo(()=>({[`__scope${n.scopeName}`]:s}),[s])}};return t.scopeName=n.scopeName,t}function I(e){const n=o.useRef(e);return o.useEffect(()=>{n.current=e}),o.useMemo(()=>(...t)=>{var r;return(r=n.current)===null||r===void 0?void 0:r.call(n,...t)},[])}const M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],L=M.reduce((e,n)=>{const t=o.forwardRef((r,c)=>{const{asChild:a,...s}=r,u=a?E:n;return o.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),o.createElement(u,A({},s,{ref:c}))});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{});function D(e,n){e&&x.flushSync(()=>e.dispatchEvent(n))}const N=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{};function C(e,n){return o.useReducer((t,r)=>{const c=n[t][r];return c??t},e)}const O=e=>{const{present:n,children:t}=e,r=T(n),c=typeof t=="function"?t({present:r.isPresent}):o.Children.only(t),a=P(r.ref,c.ref);return typeof t=="function"||r.isPresent?o.cloneElement(c,{ref:a}):null};O.displayName="Presence";function T(e){const[n,t]=o.useState(),r=o.useRef({}),c=o.useRef(e),a=o.useRef("none"),s=e?"mounted":"unmounted",[u,f]=C(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const i=v(r.current);a.current=u==="mounted"?i:"none"},[u]),N(()=>{const i=r.current,m=c.current;if(m!==e){const l=a.current,$=v(i);e?f("MOUNT"):$==="none"||(i==null?void 0:i.display)==="none"?f("UNMOUNT"):f(m&&l!==$?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,f]),N(()=>{if(n){const i=d=>{const $=v(r.current).includes(d.animationName);d.target===n&&$&&x.flushSync(()=>f("ANIMATION_END"))},m=d=>{d.target===n&&(a.current=v(r.current))};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",i),n.addEventListener("animationend",i),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",i),n.removeEventListener("animationend",i)}}else f("ANIMATION_END")},[n,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:o.useCallback(i=>{i&&(r.current=getComputedStyle(i)),t(i)},[])}}function v(e){return(e==null?void 0:e.animationName)||"none"}export{L as $,w as a,I as b,N as c,O as d,R as e,D as f,U as g};
